<div class="component subpanel metric-filter">

  {{#each subgroups as |subgroup|}}
    <div class="subgroup">
      <h4>{{subgroup.title}}</h4>

      {{#each subgroup.metrics as |metric|}}
        <div class="metric {{metric.type}}">
          <label for={{metric.col}}>{{metric.name}}</label>

          {{#if (eq metric.type 'string')}}

            <select name={{metric.col}} placeholder="Select to filter by" onchange={{action updateMetricOption value="target"}}> 
              {{#each metric.options as |option|}}
                <option value={{option}}>{{capitalize option}}</option>
              {{/each}}
            </select>

          {{else if (eq metric.type 'bool')}}

            {{input type="checkbox" name=metric.col checked=(if metric.value 'checked') change=(action toggleCheckbox metric)}}

          {{else if (eq metric.type 'date')}}

          {{else}}

            <select name="{{metric.col}}-inf" onchange={{action updateMetricInflector value="target"}}>
              <option selected={{if (eq metric.inflector 'gt') 'selected'}} value="gt">&gt;</option>
              <option selected={{if (eq metric.inflector 'eq') 'selected'}} value="eq">=</option>
              <option selected={{if (eq metric.inflector 'lt') 'selected'}} value="lt">&lt;</option>
            </select>

            {{input name=metric.col value=metric.value change=(action updateFilter metric)}}

          {{/if}}
        </div>
      {{/each}}
    </div>
  {{/each}}

</div>
